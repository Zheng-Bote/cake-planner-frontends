<div class="page-container" *transloco="let t">
  <header class="app-header">
    <div class="brand-container">
      <img src="assets/logo_500x500.png" alt="Cake Planner Logo" class="logo" />
      <div class="header-text">
        <h1 class="brand-title">{{ t('APP.TITLE') }}</h1>
        <p class="brand-slogan">{{ t('APP.SLOGAN') }}</p>
      </div>
    </div>

    <div class="language-switch">
      <button
        mat-icon-button
        [matMenuTriggerFor]="langMenu"
        matTooltip="{{ t('MENU.CHANGE_LANGUAGE') }}"
        aria-label="{{ t('MENU.CHANGE_LANGUAGE') }}"
      >
        <mat-icon>language</mat-icon>
      </button>
      <mat-menu #langMenu="matMenu">
        <button mat-menu-item (click)="switchLanguage('de')">
          <span>Deutsch</span>
        </button>
        <button mat-menu-item (click)="switchLanguage('en')">
          <span>English</span>
        </button>
      </mat-menu>
    </div>
  </header>

  <main class="main-content">
    <mat-card class="login-card">
      <mat-card-header>
        <mat-card-title>{{ t('PASSWORD.TITLE') }}</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <p class="instruction-text" style="margin-bottom: 20px; color: #666">
          {{ t('PASSWORD.INSTRUCTION') }}
        </p>

        @if (successMessage()) {
          <div
            class="alert alert-success"
            style="
              color: green;
              background: #e8f5e9;
              padding: 10px;
              border-radius: 4px;
              margin-bottom: 16px;
            "
          >
            {{ successMessage() }}
          </div>
          <div class="register-link-container">
            <a routerLink="/login" class="register-link">{{ t('PASSWORD.BACK_TO_LOGIN') }}</a>
          </div>
        }

        @if (errorMessage()) {
          <div class="error-msg">
            {{ errorMessage() }}
          </div>
        }

        @if (!successMessage()) {
          <form (ngSubmit)="onSubmit()" #forgotForm="ngForm">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>{{ t('PASSWORD.EMAIL_LABEL') }}</mat-label>
              <input
                matInput
                type="email"
                name="email"
                [(ngModel)]="email"
                required
                email
                #emailInput="ngModel"
                placeholder="max@example.com"
              />
              @if (emailInput.invalid && (emailInput.dirty || emailInput.touched)) {
                <mat-error>
                  {{ t('PASSWORD.EMAIL_INVALID') || 'Ung√ºltige E-Mail' }}
                </mat-error>
              }
            </mat-form-field>

            <button
              mat-flat-button
              color="primary"
              type="submit"
              class="submit-btn"
              [disabled]="!forgotForm.form.valid || isLoading()"
            >
              @if (isLoading()) {
                <mat-spinner diameter="20"></mat-spinner>
              } @else {
                {{ t('PASSWORD.SEND_BUTTON') }}
              }
            </button>
          </form>

          <div class="register-link-container">
            <a routerLink="/login" class="register-link">{{ t('PASSWORD.BACK_TO_LOGIN') }}</a>
          </div>
        }
      </mat-card-content>
    </mat-card>
  </main>

  <footer class="app-footer">
    <div class="footer-inner">
      <div class="copyright footer-links">
        <a href="https://zheng-bote.github.io/cake-planner-frontends/" title="Cake Planner Homepage"
          >&copy; {{ copyrightYear }} Cake Planner</a
        >
      </div>
      <div class="footer-links">
        <a routerLink="/legal-notice" title="Legal Notice" target="_blank">{{
          t('MENU.IMPRINT')
        }}</a>
        <a routerLink="/privacy-policy" title="Privacy Policy" target="_blank">{{
          t('MENU.DATA_PROTECTION')
        }}</a>
      </div>
    </div>
  </footer>
</div>
