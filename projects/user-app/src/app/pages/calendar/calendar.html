<ng-container *transloco="let t">
  <div class="calendar-header">
    <button
      mat-icon-button
      (click)="prevMonth()"
      matTooltip="{{ t('calendar.CALENDAR.PREV_MONTH') }}"
    >
      <mat-icon>chevron_left</mat-icon>
    </button>
    <h2>{{ viewDate() | date: 'MMMM yyyy' : undefined : lang() }}</h2>
    <button
      mat-icon-button
      (click)="nextMonth()"
      matTooltip="{{ t('calendar.CALENDAR.NEXT_MONTH') }}"
    >
      <mat-icon>chevron_right</mat-icon>
    </button>
  </div>

  @if (!isMobile()) {
    <div class="calendar-grid">
      @for (day of weekDays; track day) {
        <div class="weekday-header">{{ day | date: 'EEE' : undefined : lang() }}</div>
      }
      @for (day of days(); track day) {
        <div
          class="day-cell"
          [class.outside-month]="!isSameMonth(day, viewDate())"
          [class.today]="isToday(day)"
          (click)="openAddDialog(day)"
        >
          <span class="day-number">{{ day | date: 'd' : undefined : lang() }}</span>

          <div class="events-list">
            @for (evt of getEventsForDay(day); track evt.id) {
              <mat-chip-option
                color="accent"
                selected
                (click)="openEventDetails(evt, $event)"
                [matTooltip]="evt.description"
              >
                {{ evt.bakerName }}
              </mat-chip-option>
            }
          </div>
        </div>
      }
    </div>
  } @else {
    <div class="mobile-list">
      @for (day of days(); track day) {
        <div class="mobile-day-row" [class.today-row]="isToday(day)" (click)="openAddDialog(day)">
          <div class="mobile-date">
            <span class="day-name">{{ day | date: 'EEE' : undefined : lang() }}</span>
            <span class="day-num">{{ day | date: 'dd.MM' : undefined : lang() }}</span>
          </div>

          <div class="mobile-events">
            @if (getEventsForDay(day).length === 0) {
              <span class="no-event-placeholder">+</span>
            }
            @for (evt of getEventsForDay(day); track evt.id) {
              <div class="mobile-event-chip" (click)="openEventDetails(evt, $event)">
                <mat-icon class="cake-icon">cake</mat-icon>
                <span>{{ evt.bakerName }}</span>
              </div>
            }
          </div>
        </div>
      }
    </div>
  }
</ng-container>
