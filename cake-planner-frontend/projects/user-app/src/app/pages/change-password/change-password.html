<div class="container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>Neues Passwort festlegen</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p>Der Administrator hat festgelegt, dass du dein Passwort ändern musst.</p>

      <form [formGroup]="pwForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Neues Passwort</mat-label>
          <input matInput formControlName="password" type="password" />

          @if (pwForm.get('password')?.hasError('required')) {
          <mat-error>Pflichtfeld</mat-error>
          } @if (pwForm.get('password')?.hasError('minlength')) {
          <mat-error>Mindestens 8 Zeichen</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Passwort bestätigen</mat-label>
          <input matInput formControlName="confirmPassword" type="password" />

          @if (pwForm.hasError('mismatch')) {
          <mat-error>Passwörter stimmen nicht überein</mat-error>
          }
        </mat-form-field>

        <button
          mat-flat-button
          color="primary"
          type="submit"
          [disabled]="pwForm.invalid || isLoading()"
        >
          @if(isLoading()) { Speichern... } @else { Passwort ändern }
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
